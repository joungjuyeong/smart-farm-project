use smartfarm;

CREATE TABLE board (
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(20) NOT NULL,
  pass VARCHAR(100) NOT NULL,
  title VARCHAR(70) NOT NULL,
  content TEXT NOT NULL,
  wdate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  view INT(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (id)
);

CREATE TABLE comments (
  id INT AUTO_INCREMENT PRIMARY KEY,
  board_id INT UNSIGNED NOT NULL,
  commenter VARCHAR(20) NOT NULL,
  content TEXT NOT NULL,
  cdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (board_id) REFERENCES board(id) ON DELETE CASCADE
) ENGINE=InnoDB;

CREATE TABLE likes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  board_id INT UNSIGNED NOT NULL,
  user_name VARCHAR(20) NOT NULL,
  ldate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE (board_id, user_name),
  FOREIGN KEY (board_id) REFERENCES board(id) ON DELETE CASCADE
) ENGINE=InnoDB;

CREATE TABLE user (
  user_name VARCHAR(20) NOT NULL,
  user_password VARCHAR(20) NOT NULL,
  PRIMARY KEY (user_name)
) ENGINE=InnoDB;

